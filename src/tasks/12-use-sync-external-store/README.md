# Задача 12 — useSyncExternalStore и внешний стор

**Уровень:** senior

## Цель

Подписка на внешнее хранилище (localStorage, браузерный API или сторонняя библиотека) через `useSyncExternalStore`. Избежать tearing при конкурентном рендере и корректно обработать серверный рендер.

## Требования

- Выбрать внешний источник данных: например, `localStorage` (ключ, например, «theme»), или браузерный API (matchMedia, видимость вкладки), или свой маленький стор-объект с subscribe/getSnapshot.
- Реализовать подписку через `useSyncExternalStore`: передать `subscribe`, `getSnapshot` и опционально `getServerSnapshot` (для SSR: вернуть дефолтное значение).
- Компонент отображает текущее значение и реагирует на изменения (например, смена значения в другой вкладке для localStorage или изменение размера окна для matchMedia).
- В README кратко описать: зачем useSyncExternalStore вместо ручной подписки в useEffect (консистентность при конкурентном рендере, отсутствие tearing).

## Подсказки

- `useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)`
- subscribe: функция, которая подписывается на изменения и возвращает unsubscribe.
- getSnapshot: возвращает текущее значение; должно быть неизменяемым (или по ссылке) между рендерами при тех же данных.
- Для localStorage: событие `storage` срабатывает только в других вкладках; в той же вкладке нужно подписаться на свой кастомный механизм или синхронизировать при фокусе.

## Критерии приёмки

- Компонент подписан на внешний стор через useSyncExternalStore.
- При изменении данных в сторе (в допустимых сценариях) UI обновляется.
- getServerSnapshot указан и возвращает безопасное значение для SSR (если приложение поддерживает SSR).
