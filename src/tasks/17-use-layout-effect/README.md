# Задача 17 — useLayoutEffect и измерение DOM

**Уровень:** средний — продвинутый

## Цель

Использовать `useLayoutEffect` для синхронных измерений DOM до отрисовки и избежать мерцания. Реализовать тултип или dropdown, который позиционируется относительно trigger-элемента с учётом границ viewport.

## Требования

- **Тултип / попап**: при наведении или клике на элемент показывается всплывающая панель.
- **Динамическое позиционирование**: панель должна располагаться так, чтобы не выходить за границы viewport (или переворачиваться: сверху/снизу, слева/справа).
- **useLayoutEffect**: измерение trigger-элемента (`getBoundingClientRect`) и расчёт позиции панели — в `useLayoutEffect`, чтобы браузер не показывал «прыжок» (сначала отрисовка в (0,0), потом перестановка).
- **ResizeObserver** (опционально): при изменении размера окна или trigger-элемента — пересчитывать позицию.
- **Стили**: позиционирование через `position: fixed` и `top`/`left` (или `transform`).

## Демо

- Кнопки или ссылки с тултипами при hover.
- Dropdown-меню при клике: список пунктов, позиция под кнопкой; закрытие по клику вне или Escape.
- При недостатке места снизу — панель появляется сверху; при недостатке справа — прижата к левому краю.

## Подсказки

- `useLayoutEffect` выполняется синхронно после мутаций DOM, но до paint — подходит для измерений и синхронного обновления layout.
- `getBoundingClientRect()` даёт координаты и размеры элемента.
- Сравнить с `useEffect`: при `useEffect` пользователь может заметить мерцание (панель рисуется, потом переезжает).
- ResizeObserver: `new ResizeObserver(callback).observe(element)` + cleanup.

## Критерии приёмки

- Тултип/dropdown появляется в правильной позиции без видимого мерцания.
- При изменении размера окна позиция пересчитывается.
- Панель не выходит за границы viewport (или переворачивается).
- Корректная очистка подписок (ResizeObserver) при размонтировании.
